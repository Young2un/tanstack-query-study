# **Queries**

## Query Basics

`useQuery` í›…ì€ ì„œë²„ì—ì„œ ë¹„ë™ê¸° ë°ì´í„°(Promise ê¸°ë°˜)ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ í•µì‹¬ í›….

### ì¿¼ë¦¬ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ í•„ìš”í•œ ìµœì†Œ ìš”ì†Œ

- `queryKey`: ì¿¼ë¦¬ë¥¼ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ” í‚¤ (ë°°ì—´ í˜•íƒœ)
- `queryFn`: ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ (`Promise` ë°˜í™˜)

```tsx
useQuery({
  queryKey: ["todos"],
  queryFn: fetchTodoList,
});
```

### ì¿¼ë¦¬ ìƒíƒœ

ì¿¼ë¦¬ëŠ” í•œ ë²ˆì— ì•„ë˜ ì„¸ ê°€ì§€ ìƒíƒœ ì¤‘ í•˜ë‚˜ë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤

| ìƒíƒœ                                 | ì„¤ëª…                       |
| ------------------------------------ | -------------------------- |
| `isPending` / `status === 'pending'` | ë°ì´í„° ì•„ì§ ì—†ìŒ (ìš”ì²­ ì¤‘) |
| `isError` / `status === 'error'`     | ì—ëŸ¬ ë°œìƒ                  |
| `isSuccess` / `status === 'success'` | ìš”ì²­ ì„±ê³µ, ë°ì´í„° ìˆìŒ     |

ğŸ’¡ ë¶ˆë¦¬ì–¸ì„ ì“°ê³  ì‹¶ì§€ ì•Šìœ¼ë©´ ì˜¤ë¥¸ìª½ ë°©ì‹ì„ ì¨ë„ ë˜ì§€ë§Œ, TypeScriptì—ì„  `isPending`ì´ë‚˜ `isError` ì²´í¬ í›„ `data` íƒ€ì…ì´ ìë™ ì¢í˜€ì§€ê¸° ë•Œë¬¸ì— ë” ì•ˆì •ì ì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŒ

ë³´í†µì€ ì•„ë˜ì²˜ëŸ¼ ì“°ë©´ ì¶©ë¶„

```tsx
const { isPending, isError, data, error } = useQuery(...)

if (isPending) return <Loading />
if (isError) return <Error />

return <DataList data={data} />
```

## fetchStatus â€“ ì¿¼ë¦¬ ì‹¤í–‰ ìƒíƒœ

ì¿¼ë¦¬ì˜ **ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ìƒíƒœ**ëŠ” `fetchStatus`ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŒ:

| fetchStatus  | ì˜ë¯¸                                     |
| ------------ | ---------------------------------------- |
| `'fetching'` | ì§€ê¸ˆ fetching ì¤‘                         |
| `'paused'`   | fetching í•˜ë ¤ë‹¤ ë©ˆì¶˜ ìƒíƒœ (ex. ì˜¤í”„ë¼ì¸) |
| `'idle'`     | ì•„ë¬´ ê²ƒë„ ì•ˆ í•˜ëŠ” ì¤‘                     |

### ì™œ `status`ë‘ `fetchStatus`ê°€ ë”°ë¡œ ìˆëŠ”ê°€

- `status`: **ë°ì´í„°ê°€ ìˆëŠ”ê°€ ì—†ëŠ”ê°€**
- `fetchStatus`: **ì§€ê¸ˆ ì¿¼ë¦¬ í•¨ìˆ˜ê°€ ì‹¤í–‰ ì¤‘ì¸ê°€**

ì˜ˆ:

- `status === 'success'`ì¸ë°ë„ `fetchStatus === 'fetching'`ì¼ ìˆ˜ ìˆìŒ â†’ ë°±ê·¸ë¼ìš´ë“œ refetch ì¤‘
- `status === 'pending'`ì¸ë°ë„ `fetchStatus === 'paused'`ì¼ ìˆ˜ ìˆìŒ â†’ ë„¤íŠ¸ì›Œí¬ ëŠê¹€
