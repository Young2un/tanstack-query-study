# **Dependent Queries**

<aside>

먼저 받아야 하는 데이터가 있고, 그 데이터를 이용해 다음 요청을 해야 할 때, **Dependent Queries**를 쓴다.

</aside>

A데이터를 받아서 B 패칭에 써야 하는경우

B의 useQuery에 enabled 옵션에 A가 준비 됐는지 적어줘서 실행 시점을 조절하는 방식.

근데 이제, 갑자기 궁금해진 포인트! 앞서 타입스크립트 파트에서 스치듯 `skipToken` 부분을 읽었는데

조건에 따라 쿼리를 아예 실행하지 않도록 해야 할 때는 `enabled`보다는 `skipToken`을 고려하자는 식으로 말했었다.

공식문서의 지금 파트에서는 `enabled` 옵션으로 dependent query를 처리하는 법을 알려준다.

어떤게 더 베스트의 방법일까?

차이점 정리

`enabled를` 쓰면:
쿼리 객체는 여전히 만들어지고, 실행만 안 됨. (메모리 상 존재)

`skipToken을` 쓰면:
애초에 쿼리 객체 자체가 생성되지 않는다. (메모리에도 없음)

"조건에 따라 아예 쿼리를 스킵해야 하는 경우"에는 enabled보다 skipToken이 더 명확하고 안전하다

하지만 의존쿼리는 조건부쿼리의 하위개념이다.

```
조건부 쿼리
├── 단순 조건 (ex. user가 로그인했을 때만 요청)
├── 동적 조건 (ex. 필터가 선택됐을 때만 요청)
└── 의존 쿼리 (ex. userId를 받아야 project를 요청할 수 있을 때)
```

➔ **조건의 본질**에 따라 결정해야 한다.

의존 쿼리도 조건부 쿼리다. 하지만 "쿼리 객체는 항상 준비돼 있어야 한다"는 특성 때문에 enabled를 쓰는 게 자연스럽다.
